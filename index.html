<!DOCTYPE html>
<html lang="es">
<head><meta charset="UTF-8"><title>Enviar flyer</title></head>
<body>

<form  name="enviar-flyer"
       netlify
       netlify-honeypot="bot-field"
       method="POST"
       enctype="multipart/form-data"
       action="#" id="formulario-debug"><!-- MODO DEBUG: no redirige -->

  <!-- Campo oculto para Netlify Forms anti-bots -->
  <input type="hidden" name="bot-field">

  <label>
    Selecciona el flyer (JPG, PNG o PDF):
    <input type="file" name="flyer" accept=".jpg,.jpeg,.png,.pdf" required>
  </label><br><br>

  <label>
    ¿Para quién es?
    <select name="categoria">
      <option value="merienda">Merienda (inicial)</option>
      <option value="snack">Snack (primaria)</option>
    </select>
  </label><br><br>

  <!-- Envío protegido con un “secret” simple (IF en n8n) -->
  <input type="hidden" name="secret" value="TOKENSECRETO123">

  <button type="submit">Enviar flyer</button>
</form>

<script>
document.getElementById('formulario-debug').onsubmit = async function(e) {
  e.preventDefault();
  const formData = new FormData(this);
  const response = await fetch(window.location.pathname, {
    method: 'POST',
    body: formData
  });
  const text = await response.text();
  document.body.innerHTML = '<pre>' + text + '</pre>';
};
</script>
</body>
</html>
